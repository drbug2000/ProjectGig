using System;
using UnityEngine;

<<<<<<< HEAD
// »ý¸íÃ¼ °ÔÀÓ ¿ÀºêÁ§Æ®ÀÇ »À´ë
// Health , OnDamage, Die, restoreHealth, onDeath ÀÌº¥Æ®¸¦ Á¦°ø
=======
// ìƒëª…ì²´ ê²Œìž„ ì˜¤ë¸Œì íŠ¸ì˜ ë¼ˆëŒ€
// Health , OnDamage, Die, restoreHealth, onDeath ì´ë²¤íŠ¸ë¥¼ ì œê³µ
>>>>>>> effect


public class LivingEntity : MonoBehaviour, IDamageable
{
    public float startingHealth; // ì‹œìž‘ ì²´ë ¥
    public float maxHp;
<<<<<<< HEAD
    public float health { get; protected set; } // ÇöÀç Ã¼·Â
    public bool dead { get; protected set; } // »ç¸Á »óÅÂ
    public event Action onDeath; // »ç¸Á½Ã ¹ßµ¿ÇÒ ÀÌº¥Æ®

    // »ý¸íÃ¼°¡ È°¼ºÈ­µÉ¶§ »óÅÂ¸¦ ¸®¼Â
    protected virtual void OnEnable()
    {
        // »ç¸ÁÇÏÁö ¾ÊÀº »óÅÂ·Î ½ÃÀÛ
        dead = false;
        // Ã¼·ÂÀ» ½ÃÀÛ Ã¼·ÂÀ¸·Î ÃÊ±âÈ­
=======
    public float health { get; protected set; } // í˜„ìž¬ ì²´ë ¥
    public bool dead { get; protected set; } // ì‚¬ë§ ìƒíƒœ
    public event Action onDeath; // ì‚¬ë§ì‹œ ë°œë™í•  ì´ë²¤íŠ¸

    // ìƒëª…ì²´ê°€ í™œì„±í™”ë ë•Œ ìƒíƒœë¥¼ ë¦¬ì…‹
    protected virtual void OnEnable()
    {
        // ì‚¬ë§í•˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì‹œìž‘
        dead = false;
        // ì²´ë ¥ì„ ì‹œìž‘ ì²´ë ¥ìœ¼ë¡œ ì´ˆê¸°í™”
>>>>>>> effect
        
        health = startingHealth;
    }

<<<<<<< HEAD
    // µ¥¹ÌÁö¸¦ ÀÔ´Â ±â´É
    public virtual void OnDamage(float damage, GameObject hiter, Vector3 hitPoint, Vector3 hitNormal)
    {
        // µ¥¹ÌÁö¸¸Å­ Ã¼·Â °¨¼Ò
        health -= damage;
        Debug.Log("fishHP script : heart"+ health);
        // Ã¼·ÂÀÌ 0 ÀÌÇÏ && ¾ÆÁ÷ Á×Áö ¾Ê¾Ò´Ù¸é »ç¸Á Ã³¸® ½ÇÇà
=======
    // ë°ë¯¸ì§€ë¥¼ ìž…ëŠ” ê¸°ëŠ¥
    public virtual void OnDamage(float damage, GameObject hiter, Vector3 hitPoint, Vector3 hitNormal)
    {
        // ë°ë¯¸ì§€ë§Œí¼ ì²´ë ¥ ê°ì†Œ
        health -= damage;
        Debug.Log("fishHP script : heart"+ health);
        // ì²´ë ¥ì´ 0 ì´í•˜ && ì•„ì§ ì£½ì§€ ì•Šì•˜ë‹¤ë©´ ì‚¬ë§ ì²˜ë¦¬ ì‹¤í–‰
>>>>>>> effect
        if (health <= 0 && !dead)
        {
            Die();
        }
    }

    public virtual void RestoreHealth(float newHealth)
    {
        if (dead)
        {
            // ì´ë¯¸ ì‚¬ë§í•œ ê²½ìš° ì²´ë ¥ì„ íšŒë³µí•  ìˆ˜ ì—†ìŒ
            return;
        }
         health += newHealth;
            
    }


<<<<<<< HEAD
    // »ç¸Á Ã³¸®
    public virtual void Die()
    {
        // onDeath ÀÌº¥Æ®¿¡ µî·ÏµÈ ¸Þ¼­µå°¡ ÀÖ´Ù¸é ½ÇÇà
=======
    // ì‚¬ë§ ì²˜ë¦¬
    public virtual void Die()
    {
        // onDeath ì´ë²¤íŠ¸ì— ë“±ë¡ëœ ë©”ì„œë“œê°€ ìžˆë‹¤ë©´ ì‹¤í–‰
>>>>>>> effect
        if (onDeath != null)
        {
            onDeath();
        }

<<<<<<< HEAD
        // »ç¸Á »óÅÂ¸¦ ÂüÀ¸·Î º¯°æ
=======
        // ì‚¬ë§ ìƒíƒœë¥¼ ì°¸ìœ¼ë¡œ ë³€ê²½
>>>>>>> effect
        dead = true;
    }
}